<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="UTF-8">
  <title>GetALyfe</title>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

  <!-- Bootstrap CDN-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>

  <div class="container">

    <br>

    <!-- Jumbotron Title -->
    <div class="jumbotron">
      <h1 class="text-center">GetALyfe</h1>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <h3 class="text-center"><strong>List of Colleges that meet your criteria</strong>:
          </div>
        </div>
      </div>
    </div>

    <!-- Current Product -->
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="row">
              <div class="col-sm-4 col-sm-offset-2">
              </div>
              <div class="col-sm-6">
                <h3 class=""><strong></strong> <span id="highest-bidder"></span></h3>
                <h3 class=""><strong></strong> <span id="highest-price"></span></h3>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Make Your Bid -->
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Your college picks:</h3>
          </div>
          <div class="panel-body">
            <form>
              <div class="form-group">
                <label for="CollegeName">College #1</label>
                <input class="form-control" id="Collegename1" type="text">
              </div>
              <div class="form-group">
                <label for="CollegeName">College #2</label>
                <input class="form-control" id="Collegename2" type="text">
              </div>
              <div class="form-group">
                <label for="CollegeName">College #3</label>
                <input class="form-control" id="Collegename3" type="text">
              </div>
              <div class="form-group">
                <label for="CollegeName">College #4</label>
                <input class="form-control" id="Collegename4" type="text">
              </div>
              <div class="form-group">
                <label for="CollegeName">College #5</label>
                <input class="form-control" id="Collegename5" type="text">
              </div>
              <button class="btn btn-primary" id="submit-matrix" type="submit">Submit</button>
            </form>
          </div>
        </div>
      </div>

      <div class="row">
          <div class="col-lg-12">
            <div class="panel panel-default">
              <div class="panel-body">
                <h3 class="text-center"><strong>List of Colleges that meet your criteria</strong>:
              </div>
            </div>
          </div>
        </div>
    
        <!-- Current Product -->
        <div class="row">
          <div class="col-lg-12">
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="row">
                  <div class="col-sm-4 col-sm-offset-2">
                  </div>
                  <div class="col-sm-6">
                    <h3 class=""><strong></strong> <span id=""></span></h3>
                    <h3 class=""><strong></strong> <span id=""></span></h3>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

    </div>

  </div>

  <!-- JavaScript -->
  <script type="text/javascript">

    // This "document.ready" code isn't necessary in this example... but is useful to become familiar with.
    // "document.ready" makes sure that our JavaScript doesn't get run until the HTML document is finished loading.
    //Five separate AJAX calls with five separate queries had to be made or I couldn't get a return.
    $("#submit-matrix").on("click", function(response) {
      event.preventDefault();
    var schoolName1 = $("#Collegename1").val().trim();
    var schoolName2 = $("#Collegename2").val().trim();
    var schoolName3 = $("#Collegename3").val().trim();
    var schoolName4 = $("#Collegename4").val().trim();
    var schoolName5 = $("#Collegename5").val().trim();
    var queryURL1 = "https://api.data.gov/ed/collegescorecard/v1/schools.json?school.name=" + schoolName1 + "&api_key=Kcfhwk6xaDVevOVWHtH3mfVsYejS9BtoMhD1x85h";
    var queryURL2 = "https://api.data.gov/ed/collegescorecard/v1/schools.json?school.name=" + schoolName2 + "&api_key=Kcfhwk6xaDVevOVWHtH3mfVsYejS9BtoMhD1x85h";
    var queryURL3 = "https://api.data.gov/ed/collegescorecard/v1/schools.json?school.name=" + schoolName3 + "&api_key=Kcfhwk6xaDVevOVWHtH3mfVsYejS9BtoMhD1x85h";
    var queryURL4 = "https://api.data.gov/ed/collegescorecard/v1/schools.json?school.name=" + schoolName4 + "&api_key=Kcfhwk6xaDVevOVWHtH3mfVsYejS9BtoMhD1x85h";
    var queryURL5 = "https://api.data.gov/ed/collegescorecard/v1/schools.json?school.name=" + schoolName5 + "&api_key=Kcfhwk6xaDVevOVWHtH3mfVsYejS9BtoMhD1x85h";
    

    $.ajax({
      url: queryURL1,
      method: "GET"
    }).then(function(response) {
      for (var i = 0; i < response.results.length; i++) {
        var name = response.results[i].school.name;//school name
        var inStateTuition = response.results[i].latest.cost.tuition.in_state;//=====cost related fields (start)
        var outStateTuition = response.results[i].latest.cost.tuition.out_of_state;
        var averageCostOfAttendance = response.results[i].latest.cost.attendance.academic_year;
        var titleIV = response.results[i].latest.cost.title_iv.public.by_income_level;//=====cost related fields (end)
        
        var admissionRate = response.results[i].latest.admissions.admission_rate.overall;//====admissions info (start)
        var averageSAT = response.results[i].latest.admissions.sat_scores.average.overall;
        var averageACT = response.results[i].latest.admissions.act_scores.midpoint.cumulative;//===admissions info (end)

        var wageAfterSixYears = response.results[i].latest.earnings["6_yrs_after_entry"].median;//can't grab exact median wage because the next object starts with a number
        
        var currentEnrollment = response.results[i].latest.student.enrollment;//====student size
        var retentionRate = response.results[i].latest.student.retention_rate.overall;//overall retention rate

        var degreePrograms = response.results[i].latest.academics.program.degree_or_certificate;
        var availableDegreeTypes = response.results[i].latest.academics.program_available;//bachelors, certificates, associates
        var programPercentage = response.results[i].latest.academics.program_percentage;//percentage of students in each program
        
        var medianDebtAfterGraduation = response.results[i].latest.aid.median_debt.completers;//post-grad debt
        var zipCode = response.results[i].school.zip;

        console.log(name)
        
        //console.log(response.results[i].school)
        //console.log(response.results[i].latest)
        
        //console.log(Object.keys(programPercentage))

        // for (var j = 0; j < Object.keys(programPercentage).length; j++){
        //   if(Object.keys(programPercentage)[j] > 0) {
        //     console.log(Object.keys(programPercentage)[j])
        //   }
        // }
        
        // Object.keys(programPercentage).forEach(function (element){
        //    if(element > 0){
        //      console.log(element)
        //    }
        // })
        
    }
    });
    $.ajax({
      url: queryURL2,
      method: "GET"
    }).then(function(response) {
      for (var i = 0; i < response.results.length; i++) {
        var name = response.results[i].school.name;
        var inStateTuition = response.results[i].latest.cost.tuition.in_state;//=====cost related fields (start)
        var outStateTuition = response.results[i].latest.cost.tuition.out_of_state;
        var averageCostOfAttendance = response.results[i].latest.cost.attendance.academic_year;
        var titleIV = response.results[i].latest.cost.title_iv.public.by_income_level;//=====cost related fields (end)
        
        var admissionRate = response.results[i].latest.admissions.admission_rate.overall;//====admissions info (start)
        var averageSAT = response.results[i].latest.admissions.sat_scores.average.overall;
        var averageACT = response.results[i].latest.admissions.act_scores.midpoint.cumulative;//===admissions info (end)

        var wageAfterSixYears = response.results[i].latest.earnings["6_yrs_after_entry"].median;//can't grab exact median wage because the next object starts with a number
        
        var currentEnrollment = response.results[i].latest.student.enrollment;//====student info
        var retentionRate = response.results[i].latest.student.retention_rate.overall;

        var degreePrograms = response.results[i].latest.academics.program.degree_or_certificate;
        var availableDegreeTypes = response.results[i].latest.academics.program_available;//bachelors, certificates, associates
        var programPercentage = response.results[i].latest.academics.program_percentage;//percentage of students in each program
        
        var medianDebtAfterGraduation = response.results[i].latest.aid.median_debt.completers;//post-grad debt

        console.log(name)
        console.log(inStateTuition)
        console.log(outStateTuition)
        console.log(averageCostOfAttendance)
        console.log(titleIV)
        console.log(admissionRate)
        console.log(averageSAT)
        console.log(averageACT)
        console.log(wageAfterSixYears)
        console.log(currentEnrollment)
        console.log(retentionRate)
        console.log(degreePrograms)
        console.log(availableDegreeTypes)
        console.log(programPercentage)
        console.log(medianDebtAfterGraduation)
    }
    });
    $.ajax({
      url: queryURL3,
      method: "GET"
    }).then(function(response) {
      for (var i = 0; i < response.results.length; i++) {
        var name = response.results[i].school.name;
        var inStateTuition = response.results[i].latest.cost.tuition.in_state;//=====cost related fields (start)
        var outStateTuition = response.results[i].latest.cost.tuition.out_of_state;
        var averageCostOfAttendance = response.results[i].latest.cost.attendance.academic_year;
        var titleIV = response.results[i].latest.cost.title_iv.public.by_income_level;//=====cost related fields (end)
        
        var admissionRate = response.results[i].latest.admissions.admission_rate.overall;//====admissions info (start)
        var averageSAT = response.results[i].latest.admissions.sat_scores.average.overall;
        var averageACT = response.results[i].latest.admissions.act_scores.midpoint.cumulative;//===admissions info (end)

        var wageAfterSixYears = response.results[i].latest.earnings["6_yrs_after_entry"].median;//can't grab exact median wage because the next object starts with a number
        
        var currentEnrollment = response.results[i].latest.student.enrollment;//====student info
        var retentionRate = response.results[i].latest.student.retention_rate.overall;

        var degreePrograms = response.results[i].latest.academics.program.degree_or_certificate;
        var availableDegreeTypes = response.results[i].latest.academics.program_available;//bachelors, certificates, associates
        var programPercentage = response.results[i].latest.academics.program_percentage;//percentage of students in each program
        
        var medianDebtAfterGraduation = response.results[i].latest.aid.median_debt.completers;//post-grad debt

        console.log(name)
        console.log(inStateTuition)
        console.log(outStateTuition)
        console.log(averageCostOfAttendance)
        console.log(titleIV)
        console.log(admissionRate)
        console.log(averageSAT)
        console.log(averageACT)
        console.log(wageAfterSixYears)
        console.log(currentEnrollment)
        console.log(retentionRate)
        console.log(degreePrograms)
        console.log(availableDegreeTypes)
        console.log(programPercentage)
        console.log(medianDebtAfterGraduation)
    }
    });
    $.ajax({
      url: queryURL4,
      method: "GET"
    }).then(function(response) {
      for (var i = 0; i < response.results.length; i++) {
        var name = response.results[i].school.name;
        var inStateTuition = response.results[i].latest.cost.tuition.in_state;//=====cost related fields (start)
        var outStateTuition = response.results[i].latest.cost.tuition.out_of_state;
        var averageCostOfAttendance = response.results[i].latest.cost.attendance.academic_year;
        var titleIV = response.results[i].latest.cost.title_iv.public.by_income_level;//=====cost related fields (end)
        
        var admissionRate = response.results[i].latest.admissions.admission_rate.overall;//====admissions info (start)
        var averageSAT = response.results[i].latest.admissions.sat_scores.average.overall;
        var averageACT = response.results[i].latest.admissions.act_scores.midpoint.cumulative;//===admissions info (end)

        var wageAfterSixYears = response.results[i].latest.earnings["6_yrs_after_entry"].median;//can't grab exact median wage because the next object starts with a number
        
        var currentEnrollment = response.results[i].latest.student.enrollment;//====student info
        var retentionRate = response.results[i].latest.student.retention_rate.overall;

        var degreePrograms = response.results[i].latest.academics.program.degree_or_certificate;
        var availableDegreeTypes = response.results[i].latest.academics.program_available;//bachelors, certificates, associates
        var programPercentage = response.results[i].latest.academics.program_percentage;//percentage of students in each program
        
        var medianDebtAfterGraduation = response.results[i].latest.aid.median_debt.completers;//post-grad debt

        console.log(name)
        console.log(inStateTuition)
        console.log(outStateTuition)
        console.log(averageCostOfAttendance)
        console.log(titleIV)
        console.log(admissionRate)
        console.log(averageSAT)
        console.log(averageACT)
        console.log(wageAfterSixYears)
        console.log(currentEnrollment)
        console.log(retentionRate)
        console.log(degreePrograms)
        console.log(availableDegreeTypes)
        console.log(programPercentage)
        console.log(medianDebtAfterGraduation)
    }
    });
    $.ajax({
      url: queryURL5,
      method: "GET"
    }).then(function(response) {
      for (var i = 0; i < response.results.length; i++) {
        var name = response.results[i].school.name;
        var inStateTuition = response.results[i].latest.cost.tuition.in_state;//=====cost related fields (start)
        var outStateTuition = response.results[i].latest.cost.tuition.out_of_state;
        var averageCostOfAttendance = response.results[i].latest.cost.attendance.academic_year;
        var titleIV = response.results[i].latest.cost.title_iv.public.by_income_level;//=====cost related fields (end)
        
        var admissionRate = response.results[i].latest.admissions.admission_rate.overall;//====admissions info (start)
        var averageSAT = response.results[i].latest.admissions.sat_scores.average.overall;
        var averageACT = response.results[i].latest.admissions.act_scores.midpoint.cumulative;//===admissions info (end)

        var wageAfterSixYears = response.results[i].latest.earnings["6_yrs_after_entry"].median;//can't grab exact median wage because the next object starts with a number
        
        var currentEnrollment = response.results[i].latest.student.enrollment;//====student info
        var retentionRate = response.results[i].latest.student.retention_rate.overall;

        var degreePrograms = response.results[i].latest.academics.program.degree_or_certificate;
        var availableDegreeTypes = response.results[i].latest.academics.program_available;//bachelors, certificates, associates
        var programPercentage = response.results[i].latest.academics.program_percentage;//percentage of students in each program
        
        var medianDebtAfterGraduation = response.results[i].latest.aid.median_debt.completers;//post-grad debt

        console.log(name)
        console.log(inStateTuition)
        console.log(outStateTuition)
        console.log(averageCostOfAttendance)
        console.log(titleIV)
        console.log(admissionRate)
        console.log(averageSAT)
        console.log(averageACT)
        console.log(wageAfterSixYears)
        console.log(currentEnrollment)
        console.log(retentionRate)
        console.log(degreePrograms)
        console.log(availableDegreeTypes)
        console.log(programPercentage)
        console.log(medianDebtAfterGraduation)
    }
    });
    
      });//end of click function
    
    
    //$(document).ready(function() {
    //});

    
//console.log(response.results[i].school)
//console.log(response.results[i].latest)
</script>

</body>

</html>
